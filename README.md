fornax-platform.
================

## What is the NASA Astrophysics Science Platform?

Increased compute, increased reproducibility, increased inclusion, software installs done for users

* What does it do? (Basic Capabilities)
* Who is it for?
* Limits: What does it not do?
  * How much compute do I get?
  * [Limits](https://heasarc.gsfc.nasa.gov/docs/sciserver/#limits) on diskspace, lifetime of containers etc.
  * [Download](https://heasarc.gsfc.nasa.gov/docs/sciserver/#limits) restrictions to prevent egress charges

## Getting started
* How do I get an account?
* Logging in and logging out: link to the website
* How to choose which SMCE SP size to open upon login
  * Make sure to use small size for writing/debugging/testing before switching to larger sizes
  * On demand:  starts when the user asks for it (e.g., start your Fornax server), runs as long as you continue to use and pay for it.
  * Spot:  starts when you ask for it, might be given back to AWS at any time, and is thus cheap.  (What happens to user’s session when this happens in the middle of it?)
  * Reserved:  (not currently used?) started by admin and available and costing money regardless of use.
* Navigating jupyter lab
* [Home Directory](https://outerspace.stsci.edu/display/MASTDOCS/Getting+Started#GettingStarted-HomeDirectory)
  * Do those files persist between sessions?
  * Who can see my home directory?
* [Opening & Creating Files](https://outerspace.stsci.edu/display/MASTDOCS/Getting+Started#GettingStarted-HomeDirectory)
* [Uploading, Downloading, and Caching Files](https://outerspace.stsci.edu/display/MASTDOCS/Getting+Started#GettingStarted-HomeDirectory)
  * [Moving files in and out](https://heasarc.gsfc.nasa.gov/docs/sciserver/#moving-files)
* How to share files from inside the SP with collaborators
  * Download them to favorite storage place (university box account) or put in cloud (put $$ in your proposals to cover this)
* [Announcements](https://outerspace.stsci.edu/display/MASTDOCS/Getting+Started#GettingStarted-Announcements) for space limits or cost limits - (Does the SMCE have this???)
* Terminal commands to show in the SP what computing resources are available to me?
* How do I save my notebook as a python script?
* Test a notebook
* Save your work! - SP will cull after a user is inactive for a certain amount of time
* Running a notebook non-interactively
* Open a plot generated by a notebook (png, pdf, etc.)?
  * Do we need to download these or will they open in jupyter lab?
* Will notebooks that I run on the SP also work on my laptop?
* Do I need to worry about costs when working in the SP?
* How do I know what my usage is?

## Data Access
* How do I add my own data? = upload button, and where to store that?
* How to access data in the cloud?
  * [STScI](https://github.com/spacetelescope/tike_content/blob/main/content/notebooks/data-access/data-access.ipynb) tutorial
  * Can I see that directly in the terminal?
* Use astroquery or pyvo etc.,- links to various tutorials here
  * [Data discovery with HEASARC tools](https://heasarc.gsfc.nasa.gov/docs/sciserver/#data-discovery)

## Managing Software
* Making a conda environment that persists across sessions([JupyterLab Kernels](https://outerspace.stsci.edu/display/MASTDOCS/Managing+Software#ManagingSoftware-JupyterLabKernels))
* [Pre-installed Software](https://outerspace.stsci.edu/display/MASTDOCS/Managing+Software#ManagingSoftware-Pre-installedSoftwareandTemporaryAdditions): can I get a list of what is already there?
* How do I install my own software?
  * [Persistent User-Installed Software](https://outerspace.stsci.edu/display/MASTDOCS/Managing+Software#ManagingSoftware-PersistentUser-InstalledSoftware)
  * Non-persistent User-Installed Software (!pip install)
  * [From a Notebook cell:](https://outerspace.stsci.edu/display/MASTDOCS/Managing+Software#ManagingSoftware-FromaNotebookcell:)
  * [From a terminal window:](https://outerspace.stsci.edu/display/MASTDOCS/Managing+Software#ManagingSoftware-Fromaterminalwindow:)
* Terminal command to list package version info using pip
* Can I launch apps from icons? Like MOPEX or SPICE
* Can I run licensed software (IDL) in the SP?
* Can I bring my own docker image?

## Examples and Tutorials
* Cloud ([STScI](https://github.com/spacetelescope/tike_content/blob/main/content/notebooks/data-access/data-access.ipynb))
* [Parquet](https://github.com/IPAC-SW/ipac-sp-notebooks/blob/main/aws-open-data-catalogs/wise-allwise-catalog-demo.ipynb)
* Image cutouts
* Optimizing code for fast processing
  * By looking inside the code for slow pieces (CPU profiling)
  * By looking inside the code for memory troubles (memory profiling)
  * By parallelization
    * Python built in [multiprocessing](https://github.com/IPAC-SW/ipac-sp-notebooks/tree/main/parallelize)
    * Daskhub gateway
* [MAST](https://github.com/spacetelescope/tike_content/blob/main/markdown/science-examples.md)
* HEASARC [sciserver_cookbooks](https://github.com/HEASARC/sciserver_cookbooks/blob/main/Introduction.md)
* [Cross matching two large catalogs](https://github.com/IPAC-SW/ipac-sp-notebooks/blob/main/gaia_cross_SEIP/gaia_cross_SEIP.ipynb)
* [Work with theoretical catalogs](https://github.com/IPAC-SW/ipac-sp-notebooks/blob/main/cosmosims/CosmoDC2_Parquet.ipynb)
* Fully worked science use cases
  * [Forced photometry](https://github.com/IPAC-SW/ipac-sp-notebooks/blob/main/cosmosims/CosmoDC2_Parquet.ipynb)
  * [Light curves](https://github.com/IPAC-SW/ipac-sp-notebooks/blob/main/cosmosims/CosmoDC2_Parquet.ipynb)
* User contributions: open issue or PR on Github (which Github repo?)

## Troubleshooting
* If users internet connection goes away - what happens to the running notebook?
* Restart kernel
* Restart SP - will solve version issues if packages with different versions were loaded since these won’t persist across SP restarts
* [Known Issues](https://github.com/IPAC-SW/ipac-sp-notebooks/blob/main/cosmosims/CosmoDC2_Parquet.ipynb)
* helpdesk

## Getting Help
* We need to setup a helpdesk!!


## Additional Resources
* New to Python? -
  * [numpy tutorials](https://github.com/IPAC-SW/ipac-sp-notebooks/blob/main/cosmosims/CosmoDC2_Parquet.ipynb)
  * [Scipy lecture notes](https://scipy-lectures.org/)
  * [Data science handbook](https://jakevdp.github.io/PythonDataScienceHandbook/)
* [Guide](https://developer.lsst.io/python/numpydoc.html#numpydoc-sections-in-docstrings) to documenting python functions
* [Github](https://docs.github.com/en/get-started/quickstart)
* [Debugging](https://jakevdp.github.io/PythonDataScienceHandbook/01.06-errors-and-debugging.html#Debugging:-When-Reading-Tracebacks-Is-Not-Enough)
* Each Archive’s homepage
   * [IRSA](https://www.ipac.caltech.edu/project/irsa)
   * [HEASARC](https://heasarc.gsfc.nasa.gov)
   * [MAST](https://archive.stsci.edu)
* Project [Jupyter](https://jupyter.org)
  * Jupyterlab
  * Jupyter notebooks
